var xrs=function(){"use strict";function n(n,e){return e={exports:{}},n(e,e.exports),e.exports}function e(n){return function(e){return e==n}}function t(n){return function(e){return g(e)(n)}}var r=function(){var n,e,t=new Promise(function(t,r){n=t,e=r});return arguments.length&&n(arguments[0]),t.resolve=n,t.reject=e,t},i=function n(e,t){return t instanceof Array&&(t=t.reduce(n,[])),(e=e||[]).concat(t)},o=function(n,e){return e in n},u=function(n,e,t,r){return n.host&&n.host.nodeName&&(n=n.host),e.name&&(t=e,e=e.name),!o(n,e)&&Object.defineProperty(n,e,{value:t,writable:r}),n[e]},c=function n(e){function t(n,t){return n.next?n.next(t):t instanceof Array?n.apply(e,t):n.call(e,t)}function o(n,e){for(var t=n.length;~--t;)e!=n[t]&&e!=n[t].fn&&e||n.splice(t,1)}function c(e,t){var i=n((t=t||{}).base||r());return i.i=0,i.li=[],i.fn=t.fn,i.parent=e,i.source=t.fn?i.parent.source:i,i.on("stop",function(){return i.type?i.parent.off(i.type,i):i.parent.off(i)}),i.each=function(n){var e=n.next?n:c(i,{fn:n});return i.li.push(e),e},i.pipe=function(n){return n(i)},i.map=function(n){return i.each(function(e,t,r){return r.next(n(e,t,r))})},i.filter=function(n){return i.each(function(e,t,r){return n(e,t,r)&&r.next(e)})},i.reduce=function(n,e){return i.each(function(t,r,i){return i.next(e=n(e,t,r,i))})},i.unpromise=function(){var n=c(i,{base:{},fn:function(e){return n.next(e)}});return i.li.push(n),n},i.next=function(n){return i.resolve&&i.resolve(n),i.li.length?i.li.map(function(e){return e.fn(n,e.i++,e)}):n},i.until=function(n){return n.each(function(){i.source.emit("stop")}),i},i.off=function(n){return o(i.li,n),i},i[Symbol.asyncIterator]=function(){return{next:()=>i.wait=new Promise(n=>{i.wait=!0,i.map((e,t,r)=>{delete i.wait,i.off(r),n({value:e,done:!1})}),i.emit("pull",i)})}},i}return e=e||{},u(e,"emit",function(n,r,o){for(var u=e.on[n.split(".")[0]]||[],c=[],f=0;f<u.length;f++)u[f].ns&&o&&!o(u[f].ns)||c.push(t(u[f].isOnce?u.splice(f--,1)[0]:u[f],r));for(f=0;f<e.on["*"].length;f++)c.push(t(e.on["*"][f],[n,r]));return c.reduce(i,[])},1),u(e,"once",function(n,t){return e.on(n,t,!0)},1),u(e,"off",function(n,t){return o(e.on[n]||[],t),t&&t.ns&&delete e.on[n]["$"+t.ns],e},1),u(e,"on",function(n,t,r){function i(n){return n.isOnce=r,n.type=u,f&&(e.on[u]["$"+(n.ns=f)]=n),a.push(n),n.next?n:e}var u=n.split(".")[0],f=n.split(".")[1],a=e.on[u]=e.on[u]||[],s="function"==typeof t?t:0;return!s&&f?(s=e.on[u]["$"+f])?s:i(c(e,t)):s||f?s&&f?i((o(a,e.on[u]["$"+f]||-1),s)):!(!s||f)&&i(s):i(c(e,t))},1),e.on["*"]=e.on["*"]||[],e},f=function(n=location.origin.replace("http","ws")){const e=c({attempt:0});return e.ready=e.once("connected"),e.connect=p(e,n),e.connect(),e.send=(n=>e.ready.then(e=>e.send(n))),e};const{min:a,pow:s}=Math,p=(n,e)=>()=>{const{WebSocket:t,location:r,setTimeout:i}=window,o=new t(e);o.onopen=(()=>n.emit("connected",o)),o.onmessage=(e=>n.emit("recv",e.data)),o.onclose=(()=>{n.ready=n.once("connected"),n.emit("disconnected"),i(n.connect,l(++n.attempt))})},l=(n,e=100,t=1e4)=>a(t,e*s(2,n));var d=e;e.fn=function(n){return"function"==typeof n},e.str=function(n){return"string"==typeof n},e.num=function(n){return"number"==typeof n},e.obj=function(n){return"object"==typeof n},e.lit=function(n){return"object"==typeof n&&!(n instanceof Array)},e.bol=function(n){return"boolean"==typeof n},e.truthy=function(n){return 1==!!n},e.falsy=function(n){return 0==!!n},e.arr=function(n){return n instanceof Array},e.null=function(n){return null===n},e.def=function(n){return void 0!==n},e.in=function(n){return function(e){return!!n&&(n.indexOf?~n.indexOf(e):e in n)}},e.promise=function(n){return n instanceof Promise},e.stream=function(n){return!(!n||!n.next)};var v=function(n){return Object.keys(d.obj(n)||d.fn(n)?n:{})},m=function(n){return n.__data__},y=function(n){return function(){return n}},h=function(n){return 0===n?"0":n?d.fn(n)?""+n:d.obj(n)?JSON.stringify(n):String(n):""},g=function n(e,t){var r=arguments.length>1,i=d.fn(e)?[]:h(e).split("."),o=i.shift();return function(u,c){var f={};return u?d.num(e)||e?d.arr(e)?(e.map(function(e){var t=n(e)(u);void 0!=t&&n(e,d.fn(t)?y(t):t)(f)}),f):u[e]||!i.length?r?(u[e]=d.fn(t)?t(u[e],c):t,u):d.fn(e)?e(u):u[e]:r?(n(i.join("."),t)(u[o]?u[o]:u[o]={}),u):n(i.join("."))(u[o]):u:void 0}},x=t;t.parent=function(n){return m(this.parentNode)[n]};var O=function(n){return n?v(n).map(x(n)):[]},b=n(function(n){!function(){function e(n){return"object"==typeof n?null===n?"null":n&&1===n.nodeType?"dom":n instanceof Array?"array":n instanceof Date?"date":"object":typeof n}function t(n){var e=arguments.length;if(e<2||null==n)return n;for(var t=1;t<e;t++)for(var r=arguments[t],i=Object.keys(r),o=i.length,u=0;u<o;u++){var c=i[u];void 0===n[c]&&(n[c]=r[c])}return n}function r(n,t,i,c){i.prepare&&i.prepare(n),c=c||[];var f=e(n);if(-1!==s.indexOf(f)){var a=c.indexOf(n);if(-1===a){var l={};c[a=t.push({contents:l,value:u(n)})-1]=n;for(var d in n)i.isSerializable(n,d)&&(l[d]=r(n[d],t,i,c))}return p+a}return o(n)}function i(n,e,t,r){if(r=r||[],a(n,p)){var o=parseInt(n.slice(p.length),10);if(!r.hasOwnProperty(o)){var u=e[o],s=c(u.value),l=u.contents;r[o]=s;for(var d in l)s[d]=i(l[d],e,t,r)}return t.finalize&&t.finalize(r[o]),r[o]}return t.finalize&&t.finalize(n),f(n)}function o(n){var t=e(n);if("undefined"===t)return v;if("function"===t)return d+n.toString();if("date"===t)return m+n.getTime();if(n===1/0)return l;if("dom"!==t)return n}function u(n){var t=e(n);return"function"===t||"date"===t?o(n):"object"===t?y:"array"===t?h:n}function c(n){if("string"===e(n)){if(n===v)return;if(a(n,d))return new Function("return "+n.slice(d.length))();if(a(n,m)){var t=parseInt(n.slice(m.length),10);return new Date(t)}if(a(n,y))return{};if(a(n,h))return[];if(n===l)return 1/0}return n}function f(n){if("string"===e(n)){if(n===v)return;if(a(n,d)){var t=n.slice(d.length),r=t.indexOf("(")+1,i=t.indexOf(")",r),o=t.slice(r,i),u=t.indexOf("{")+1,c=t.lastIndexOf("}")-1,f=t.slice(u,c);return new Function(o,f)}if(a(n,m)){var s=parseInt(n.slice(m.length),10);return new Date(s)}if(n===l)return 1/0}return n}function a(n,t){return"string"===e(n)&&n.slice(0,t.length)===t}var s="object array date function".split(" "),p="_CRYO_REF_",l="_CRYO_INFINITY_",d="_CRYO_FUNCTION_",v="_CRYO_UNDEFINED_",m="_CRYO_DATE_",y="_CRYO_OBJECT_",h="_CRYO_ARRAY_",g={stringify:function(n,e){var i=[],o=r(n,i,e=t((e="function"==typeof e?{prepare:e}:e)||{},{prepare:null,isSerializable:function(n,e){return n.hasOwnProperty(e)}}));return JSON.stringify({root:o,references:i})},parse:function(n,e){var r=JSON.parse(n);return e="function"==typeof e?{finalize:e}:e,e=t(e||{},{finalize:null}),i(r.root,r.references,e)}},x=this;n.exports?n.exports=g:x.Cryo=g}()});return n(function(n){n.exports=function({socket:n=f()}={}){return n.id=0,n.on("disconnected").map(()=>n.once("connected").then(t(n))),n.on("recv").map(n=>r(n)).each(({id:e,data:t})=>t.exec?t.exec(n.on[`$${e}`]&&n.on[`$${e}`][0],t.value):n.emit(`$${e}`,t)),Object.defineProperty(i(n),"subscriptions",{get:()=>e(n)})};const e=n=>O(n.on).map(n=>n&&n[0]).filter(n=>n&&n.type&&"$"==n.type[0]),t=n=>()=>e(n).map(n=>n.type).map(e=>n.send(n.on[e][0].subscription)),{parse:r}=b,i=(n,e)=>(t,r)=>{if(t instanceof window.Blob)return o(n,t,r);const u=h(++n.id),c=n.on(`$${u}`),f=(t,r=0)=>n.send(c.source.subscription=h({id:u,data:t,type:e})).then(()=>c.emit("sent",{id:u,count:r}));return t.next?t.map(f).source.emit("start"):f(t),c.source.once("stop").filter(n=>"CLOSED"!=n).map(()=>i(n,"UNSUBSCRIBE")(u).filter((n,e,t)=>t.source.emit("stop","CLOSED"))),c},o=(n,e,t,r=0,o=1024)=>{const u=c().on("recv"),f=t=>()=>r>=e.size?u.emit("sent",{id:t}):(n.send(e.slice(r,r+=o)),window.setTimeout(f(t)));return i(n,"BINARY")({size:e.size,meta:t}).on("sent",({id:n})=>f(n)()).on("progress",n=>u.emit("progress",{received:n,total:e.size})).map(u.next).source.until(u.once("stop")),u}})}();
